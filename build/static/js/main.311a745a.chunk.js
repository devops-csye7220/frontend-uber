(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,a){"use strict";a.r(t),a.d(t,"TOKEN_SESSION_ATTRIBUTE_NAME",(function(){return m})),a.d(t,"TOKEN_HEADER_LENGTH",(function(){return u}));var n=a(5),r=a(6),l=a(14),o=a.n(l),s=a(62),c=a.n(s),i=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_URL+"/api/users"||!1,m="token",u=7,d=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getAllUsers",value:function(){return o.a.get(i)}},{key:"getAllCustomers",value:function(){return o.a.get(i+"/customers",{headers:{authorization:this.getUserToken()}})}},{key:"getUserFromId",value:function(e){return o.a.get("".concat(i,"/").concat(e),{headers:{authorization:this.getUserToken()}})}},{key:"checkEmailExists",value:function(e){return o.a.post("".concat(i,"/email"),e)}},{key:"createNewUser",value:function(e){return o.a.post(i,e)}},{key:"loginUser",value:function(e){return console.log(i),o.a.post("".concat(i,"/login"),e)}},{key:"updateUser",value:function(e){return o.a.patch("".concat(i,"/").concat(e._id),e)}},{key:"registerSuccessfulLoginForJwt",value:function(e){localStorage.setItem(m,e),this.setupAxiosInterceptors(e)}},{key:"getLoggedInUserID",value:function(){var e=localStorage.getItem(m);return null===e?"":c()(e.slice(u)).id}},{key:"getLoggedInUserDetails",value:function(){var e=localStorage.getItem(m);return null===e?"":c()(e.slice(u))}},{key:"getUserToken",value:function(){var e=localStorage.getItem(m);return null===e?"":e.slice(u)}},{key:"setupAxiosInterceptors",value:function(e){var t=this;o.a.interceptors.request.use((function(a){return t.isUserLoggedIn()&&(a.headers.authorization=e),a}))}},{key:"isUserLoggedIn",value:function(){return null!==localStorage.getItem(m)}},{key:"isUserStaff",value:function(){var e=this.getLoggedInUserDetails();return"admin"===e.usertype||"staff"===e.usertype}},{key:"isUserAdmin",value:function(){return"admin"===this.getLoggedInUserDetails().usertype}},{key:"logout",value:function(){localStorage.removeItem(m),window.location.href="/"}}]),e}();t.default=new d},113:function(e,t,a){},114:function(e,t,a){},12:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(6),l=a(14),o=a.n(l);a(44).config();var s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_URL+"/api/locations"||!1,c=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"getAllLocations",value:function(){return o.a.get(s)}},{key:"getLocationFromId",value:function(e){return o.a.get("".concat(s,"/").concat(e))}},{key:"createNewLocation",value:function(e){return o.a.post(s,e)}},{key:"getGeocodeFromAddress",value:function(e){var t=e.replace(/ /g,"+");return o.a.create().get("".concat("https://maps.googleapis.com/maps/api/geocode/json?address="+t+"&key=AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"))}},{key:"updateLocation",value:function(e){return o.a.patch(s+"/".concat(e._id),e)}}]),e}();t.default=new c},134:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),o=a.n(l),s=(a(90),a(5)),c=a(6),i=a(8),m=a(7),u=a(28),d=a(35),h=a(153),g=a(155),p=a(11),E=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:{}},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(p.default.isUserLoggedIn()){var e=p.default.getLoggedInUserDetails();console.log(e),this.setState({user:e})}}},{key:"render",value:function(){var e=p.default.isUserLoggedIn(),t=p.default.isUserStaff();return r.a.createElement(h.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(h.a.Brand,{href:"/"},"Uber Bus"),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(g.a,{className:"mr-auto"},e&&r.a.createElement(r.a.Fragment,null,!t&&r.a.createElement(g.a.Link,{href:"/dashboard"},"Dashboard"),!t&&r.a.createElement(g.a.Link,{href:"/mybookings"},"Bookings"),t&&r.a.createElement(g.a.Link,{href:"/staff"},"Staff Dashboard")),r.a.createElement(g.a.Link,{href:"/locations"},"Locations")),r.a.createElement(g.a,null,e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Link,{href:"/myprofile"},"Welcome, ",this.state.user.firstname," ",this.state.user.lastname),r.a.createElement(g.a.Link,{onClick:p.default.logout},"Logout"))),r.a.createElement(g.a,null,!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Link,{href:"/login"},"Login"),r.a.createElement(g.a.Link,{href:"/signup"},"Sign up")))))}}]),a}(n.Component),f=(a(113),n.Component,a(156)),b=a(144),v=(a(114),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=p.default.isUserLoggedIn(),t=p.default.isUserStaff();return r.a.createElement(r.a.Fragment,null,e&&!t&&r.a.createElement("div",{className:"landing-grid landing-grid-dashboard"},r.a.createElement(f.a,{className:"landing-card"},r.a.createElement(f.a.Body,null,r.a.createElement(f.a.Title,null,r.a.createElement("h1",null,"No mask. No ride.")),r.a.createElement("br",null),r.a.createElement(f.a.Subtitle,{className:"mb-2 text-muted"},"Your safety drives us"),r.a.createElement("br",null),r.a.createElement(f.a.Text,{className:"text-justify"},"Whether you\u2019re in the back seat or behind the wheel, your safety is essential. We are committed to doing our part, and technology is at the heart of our approach. We partner with safety advocates and develop new technologies and systems to help improve safety and help make it easier for everyone to get around."),r.a.createElement(u.b,{className:"no-text-decoration",to:"/dashboard"},r.a.createElement(b.a,{variant:"warning",className:"btn btn-lg btn-block"},"Dashboard"))))),e&&t&&r.a.createElement("div",{className:"landing-grid landing-grid-system"},r.a.createElement(f.a,{className:"landing-card"},r.a.createElement(f.a.Body,null,r.a.createElement(f.a.Title,null,r.a.createElement("h1",null,"Rides and beyond")),r.a.createElement("br",null),r.a.createElement(f.a.Subtitle,{className:"mb-2 text-muted"},"We ignite opportunity by setting the world in motion"),r.a.createElement("br",null),r.a.createElement(f.a.Text,{className:"text-justify"},"Good things happen when people can move, whether across town or toward their dreams. Opportunities appear, open up, become reality. What started as a way to tap a button to get a ride has led to billions of moments of human connection as people around the world go all kinds of places in all kinds of ways with the help of our technology."),r.a.createElement(u.b,{className:"no-text-decoration",to:"/staff"},r.a.createElement(b.a,{variant:"warning",className:"btn btn-lg btn-block"},"Manage System"))))),!e&&r.a.createElement("div",{className:"landing-grid landing-grid-signup"},r.a.createElement(f.a,{className:"landing-card"},r.a.createElement(f.a.Body,null,r.a.createElement(f.a.Title,null,r.a.createElement("h1",null,"Rides and beyond")),r.a.createElement("br",null),r.a.createElement(f.a.Subtitle,{className:"mb-2 text-muted"},"We ignite opportunity by setting the world in motion"),r.a.createElement("br",null),r.a.createElement(f.a.Text,{className:"text-justify"},"Good things happen when people can move, whether across town or toward their dreams. Opportunities appear, open up, become reality. What started as a way to tap a button to get a ride has led to billions of moments of human connection as people around the world go all kinds of places in all kinds of ways with the help of our technology."),r.a.createElement(u.b,{className:"no-text-decoration",to:"/signup"},r.a.createElement(b.a,{variant:"info",className:"btn btn-lg btn-block"},"Sign Up"))))))}}]),a}(n.Component)),k=a(17),y=a(9),C=a(145),S=a(152),M=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({errorMessage:""},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t={firstname:n.state.firstname.trim(),lastname:n.state.lastname.trim(),email:n.state.email,password:n.state.password,usertype:"customer"};if(""===n.state.firstname)return n.setState({errorMessage:"First name can't be empty!"});if(""===n.state.lastname)return n.setState({errorMessage:"Last name can't be empty!"});if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n.state.email).toLowerCase()))return n.setState({errorMessage:"Please enter a valid email!"});p.default.createNewUser(t).then((function(){p.default.loginUser({email:n.state.email,password:n.state.password}).then((function(e){p.default.registerSuccessfulLoginForJwt(e.data.token),window.location.href="/"}))})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.state={firstname:"",lastname:"",email:"",password:"",errorMessage:""},n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-grid"},r.a.createElement("div",null,r.a.createElement(C.a,{className:"alert text-center",show:this.state.errorMessage,variant:"danger"},this.state.errorMessage)),r.a.createElement(f.a,{className:"card-block"},r.a.createElement(f.a.Img,{variant:"top",style:{margin:"1vh auto",width:"60%"},src:"".concat("","/signup.jpg")}),r.a.createElement(f.a.Body,null,r.a.createElement(S.a,{onSubmit:this.handleSubmit,id:"signup_form"},r.a.createElement(S.a.Group,{controlId:"formHorizontalFirstName"},r.a.createElement(S.a.Label,null,"First Name"),r.a.createElement(S.a.Control,{name:"firstname",type:"firstname",className:"form-control",placeholder:"Enter first name",onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,{controlId:"formHorizontalLastName"},r.a.createElement(S.a.Label,null,"Last Name"),r.a.createElement(S.a.Control,{name:"lastname",type:"lastname",className:"form-control",placeholder:"Enter last name",onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,{controlId:"formHorizontalEmail"},r.a.createElement(S.a.Label,null,"Email"),r.a.createElement(S.a.Control,{name:"email",type:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,{controlId:"formHorizontalPassword"},r.a.createElement(S.a.Label,null,"Password"),r.a.createElement(S.a.Control,{name:"password",type:"password",className:"form-control",placeholder:"Enter password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain: at least one number, one uppercase, lowercase letter, and at least 8 or more characters",onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,null,r.a.createElement(b.a,{className:"btn btn-dark btn-lg btn-block",type:"submit"},"Sign up"),r.a.createElement("p",{className:"forgot-password text-right"},"Already registered ",r.a.createElement("a",{href:"/login"},"log in?")))))))}}]),a}(n.Component),w=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({errorMessage:""},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.password};if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n.state.email).toLowerCase()))return n.setState({errorMessage:"Please enter a valid email!"});p.default.loginUser(t).then((function(e){p.default.registerSuccessfulLoginForJwt(e.data.token),window.location.href="/"})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.state={email:"sajal.sood@gmail.com",password:"Admin@123",errorMessage:""},n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-grid"},r.a.createElement("div",null,r.a.createElement(C.a,{className:"alert text-center",show:this.state.errorMessage,variant:"danger"},this.state.errorMessage)),r.a.createElement(f.a,{className:"card-block"},r.a.createElement(f.a.Img,{variant:"top",style:{margin:"0 auto",width:"90%"},src:"".concat("","/login.png")}),r.a.createElement(f.a.Body,null,r.a.createElement(S.a,{onSubmit:this.handleSubmit,id:"login_form"},r.a.createElement(S.a.Group,{controlId:"formHorizontalEmail"},r.a.createElement(S.a.Label,null,"Email"),r.a.createElement(S.a.Control,{name:"email",value:"sajal.sood@gmail.com",placeholder:"Enter email",className:"form-control",type:"email",onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,{controlId:"formHorizontalPassword"},r.a.createElement(S.a.Label,null,"Password"),r.a.createElement(S.a.Control,{name:"password",value:"Admin@123",placeholder:"Enter password",className:"form-control",type:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain: at least one number, one uppercase, lowercase letter, and at least 8 or more characters",onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,null,r.a.createElement(b.a,{className:"btn btn-dark btn-lg btn-block",type:"submit"},"Login"))))))}}]),a}(n.Component),O=a(13),j=a(12),I=(a(76),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={locations:[],activeMarker:{},showingInfoWindow:!1,selectedPlace:{}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.locations;j.default.getAllLocations().then((function(a){a.data.forEach((function(a){j.default.getGeocodeFromAddress(a.address).then((function(n){var r={id:a._id,address:a.address,name:a.name,lat:n.data.results[0].geometry.location.lat,lng:n.data.results[0].geometry.location.lng,cars:a.cars};t.push(r),e.setState({locations:t})}))}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(O.Map,{google:this.props.google,initialCenter:{lat:42.361145,lng:-71.057083},zoom:13,onClick:this.mapOnMapClick},this.state.locations.map((function(t){return r.a.createElement(O.Marker,{id:t.id,name:t.name,address:t.address,onClick:e.mapOnMarkerClick,position:{lat:t.lat,lng:t.lng}})})),r.a.createElement(O.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location")))))}}]),a}(r.a.Component)),L=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"})(I),A=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return p.default.isUserLoggedIn()?r.a.createElement(d.b,this.props):r.a.createElement(d.a,{to:"/"})}}]),a}(n.Component),_=a(84),D=a(146),T=a(147),B=a(82),N=(a(134),{borderBottom:"4px solid #009bde",color:"white"}),F={color:"white"},P=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=window.location.pathname,t=p.default.isUserAdmin;return r.a.createElement(D.a,{style:{margin:"0",padding:"0",maxWidth:"100%"}},r.a.createElement(T.a,{style:{margin:"0"}},r.a.createElement(B.a,{className:"sidenav",md:2},r.a.createElement("h3",null,t?"Admin":"Staff"," Functions"),r.a.createElement("p",null,r.a.createElement("a",{href:"/staff",style:"/staff"===e?N:F},"Overview")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/signup",style:"/admin/signup"===e?N:F},"Create Account")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/addcars",style:"/admin/addcars"===e?N:F},"Create Bus")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/addlocation",style:"/admin/addlocation"===e?N:F},"Add Location")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/customers",style:"/admin/customers"===e?N:F},"View All Customers")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/bookings",style:"/admin/view/bookings"===e?N:F},"View All Bookings")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/cars",style:"/admin/view/cars"===e?N:F},"View All Buses")),r.a.createElement("p",null,r.a.createElement("a",{href:"/admin/view/location",style:"/admin/view/location"===e?N:F},"View All Locations")))),r.a.createElement(B.a,{className:"main",md:10,style:{paddingTop:"5vh"}},this.props.children)))}}]),a}(n.Component),z=function(e){var t=e.component,a=Object(_.a)(e,["component"]);return p.default.isUserLoggedIn()&&(p.default.isUserStaff()||p.default.isUserAdmin())?r.a.createElement(d.b,Object.assign({},a,{render:function(e){return r.a.createElement(P,null,r.a.createElement(t,e))}})):r.a.createElement(d.a,{to:"/"})},H=a(148),U=a(16),G=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={location:{},cars:[],activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.url.split("/")[2];j.default.getLocationFromId(t).then((function(t){j.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})})),t.data.cars.forEach((function(t){U.default.getCar(t).then((function(t){e.state.cars.push(t.data.car),e.setState({cars:e.state.cars})}))}))}))}},{key:"render",value:function(){return r.a.createElement(D.a,{style:{padding:"1vh"}},r.a.createElement(H.a,null,r.a.createElement("h2",null,"Welcome to one of our locations"),r.a.createElement(b.a,{href:"/locations",variant:"primary"},"Back to the map")),this.state.isLoading&&r.a.createElement("div",{id:"garage-map",style:{height:"400px"}},r.a.createElement(O.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"400px"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(O.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(O.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))),r.a.createElement("h3",null,this.state.location.name),r.a.createElement("strong",null,"Address: "),r.a.createElement("p",null,this.state.location.address),r.a.createElement("strong",null,"Number of cars: "),r.a.createElement("p",null,this.state.cars.length),r.a.createElement("strong",null,"Cars at this location:"),r.a.createElement(D.a,{fluid:!0,id:"car-show"},r.a.createElement(T.a,null,this.state.cars.map((function(e){return r.a.createElement(x,{car:e})})))))}}]),a}(n.Component);function x(e){var t=e.car;return r.a.createElement(B.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:t.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},t.make),r.a.createElement("p",null,t.fueltype,", ",t.bodytype,", ",t.seats," seaters, ",t.colour),r.a.createElement("h5",null,"$",t.costperhour," per hour")))}var W=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"})(G),Y=a(154),R=a(157),q=a(151),V=["Black","Yellow","Blue","White","Green","Red","Orange","Purple"],K=["Sedan","MPV","Sports","Hatchback","Ute"],$=[2,4,5,6,7],Z=["Petrol","Diesel"],J=a(14),Q=a.n(J);a(44).config();var X=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_URL+"/api/bookings"||!1,ee=new(function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"getNextBooking",value:function(){return Q.a.get("".concat(X,"/customers/next"),{headers:{authorization:p.default.getUserToken()}})}},{key:"createBooking",value:function(e){return Q.a.post(X,e)}},{key:"getUserBookings",value:function(e){return Q.a.get("".concat(X,"/customers/all/").concat(e),{headers:{authorization:p.default.getUserToken()}})}},{key:"getUserBooking",value:function(e){return Q.a.get("".concat(X,"/customers/").concat(e),{headers:{authorization:p.default.getUserToken()}})}},{key:"modifyBooking",value:function(e){return Q.a.patch("".concat(X,"/customers/").concat(e.id),e)}},{key:"getAllBookings",value:function(){return Q.a.get("".concat(X,"/customers/all"),{headers:{authorization:p.default.getUserToken()}})}},{key:"getBooking",value:function(e){return Q.a.get("".concat(X,"/").concat(e),{headers:{authorization:p.default.getUserToken()}})}}]),e}()),te=a(25),ae=a.n(te),ne=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.handleConfirmButton=function(e){e.preventDefault(),console.log(n.state.destination);var t={pickupTime:n.props.pickupTime,returnTime:n.props.returnTime,user:p.default.getLoggedInUserID(),car:n.props.car._id,destination:n.state.destination,location:n.props.car.location};console.log(t),ee.createBooking(t).then((function(e){window.location.href="/mybookings/".concat(e.data.response.booking._id)})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.handleCancelButton=function(e){e.preventDefault(),n.props.handleClose()},n.mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={errorMessage:"",location:{},destination:"",destinations:[],activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleConfirmButton=n.handleConfirmButton.bind(Object(y.a)(n)),n.handleCancelButton=n.handleCancelButton.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.car;j.default.getLocationFromId(t.location).then((function(t){j.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))}));var a=this.state.destinations,n=this.state.destination;j.default.getAllLocations().then((function(t){t.data.forEach((function(e){var t={id:e._id,address:e.address,name:e.name};a.push(t)})),n=a[0].id,e.setState({destination:n})}))}},{key:"calculateBookingCost",value:function(){var e=new Date(this.props.pickupTime),t=new Date(this.props.returnTime),a=new Date(t-e).getTime()/3600;return(parseInt(this.props.car.costperhour)*(a/1e3)).toFixed(2)}},{key:"render",value:function(){var e=this.props,t=e.locations,a=e.car,n=e.pickupTime,l=e.returnTime,o=this.calculateBookingCost();return r.a.createElement("div",{className:"container"},this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Booking failed!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(R.a,null,r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Pickup - ")," ",ae()(n).format("MMMM Do YYYY, h:mm a")," "),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Return - ")," ",ae()(l).format("MMMM Do YYYY, h:mm a")),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Price - "),"$",o,"/hr"),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Fuel Type - "),a.fueltype),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Location - ")," ",t.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===a.location&&r.a.createElement(r.a.Fragment,null,e.name))}))),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Address - ")," ",t.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===a.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement(R.a.Item,null,r.a.createElement("div",{className:"filter-confirm"},r.a.createElement("div",null,r.a.createElement(b.a,{className:"btn btn-block",variant:"success",onClick:this.handleConfirmButton},"Confirm")),r.a.createElement("div",null,r.a.createElement(b.a,{className:"btn btn-block",variant:"danger",onClick:this.handleCancelButton},"Cancel"))))))}}]),a}(n.Component),re=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"})(ne),le=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.handleClose=function(e){n.setState({popUp:!1})},n.handleSubmitFilter=function(e){e.preventDefault();var t={pickupTime:n.state.pickupTime,returnTime:n.state.returnTime,availableCars:n.state.availableCars,make:n.state.make,seats:n.state.seats,fueltype:n.state.fueltype,colour:n.state.colour,location:n.state.location,bodytype:n.state.bodytype};U.default.filterCars(t).then((function(e){n.setState({availableCars:e.data.availableCars,errorMessage:""})})).catch((function(e){n.setState({errorMessage:e.response.data.message,availableCars:[]})}))},n.state={pickupTime:"",returnTime:"",availableCars:[],make:"",seats:"Any",fueltype:"Any",colour:"Any",location:"Any",bodytype:"Any",locations:[],errorMessage:"",popUp:!1,selectedCar:""},n.handleSubmitFilter=n.handleSubmitFilter.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.togglePopUp=n.togglePopUp.bind(Object(y.a)(n)),n.handleClose=n.handleClose.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"togglePopUp",value:function(e){this.state.popUp&&(e=null),this.setState({popUp:!this.state.popUp,selectedCar:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.availableCars,n=t.pickupTime,r=t.returnTime;console.log(a),0!==a.length&&""!==n&&""!==r||this.props.history.push("/dashboard"),this.setState({availableCars:a,pickupTime:n,returnTime:r});var l=this.state.locations;j.default.getAllLocations().then((function(t){t.data.forEach((function(t){var a={id:t._id,address:t.address,name:t.name};l.push(a),e.setState({locations:l})}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"filter-grid"},r.a.createElement("div",null),r.a.createElement("div",{className:"filter-block"},r.a.createElement("div",null,this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error filtering cars!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(S.a,{onSubmit:this.handleSubmitFilter,id:"filter_form"},r.a.createElement(S.a.Group,{controlId:"formHorizontalFirstName"},r.a.createElement(S.a.Label,null,"Make"),r.a.createElement(S.a.Control,{name:"make",type:"text",placeholder:"Make",onChange:this.handleChange})),r.a.createElement(S.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(S.a.Label,null,"Seats"),r.a.createElement(S.a.Control,{name:"seats",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),$.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(S.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(S.a.Label,null,"Fuel Type"),r.a.createElement(S.a.Control,{name:"fueltype",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),Z.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(S.a.Group,{controlId:"exampleForm.ControlSelect3"},r.a.createElement(S.a.Label,null,"Body Type"),r.a.createElement(S.a.Control,{name:"bodytype",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),K.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(S.a.Group,{controlId:"exampleForm.ControlSelect4"},r.a.createElement(S.a.Label,null,"Colour"),r.a.createElement(S.a.Control,{name:"colour",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),V.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",null,e))})))),r.a.createElement(S.a.Group,{controlId:"exampleForm.ControlSelect5"},r.a.createElement(S.a.Label,null,"Location"),r.a.createElement(S.a.Control,{name:"location",as:"select",onChange:this.handleChange},r.a.createElement("option",null,"Any"),this.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:e.id},e.name+" @ "+e.address))})))),r.a.createElement(S.a.Group,null,r.a.createElement(b.a,{variant:"warning",className:"btn btn-lg btn-block",type:"submit"},"Filter")))),r.a.createElement("div",null,r.a.createElement("div",{className:"text-center vert-center"},r.a.createElement("h4",null,r.a.createElement("small",null,"Available Buses from")," ",ae()(this.state.pickupTime).format("MMMM Do YYYY, h:mm a"),r.a.createElement("small",null," till "),ae()(this.state.returnTime).format("MMMM Do YYYY, h:mm a"))),r.a.createElement(Y.a,null,this.state.availableCars.map((function(t,a){return r.a.createElement(f.a,null,r.a.createElement(f.a.Header,null,r.a.createElement(Y.a.Toggle,{style:{textDecoration:"none"},as:b.a,variant:"link",eventKey:++a},a,". ",t.make," -  ",e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.name))})))),r.a.createElement(Y.a.Collapse,{eventKey:a},r.a.createElement(f.a.Body,null,r.a.createElement(R.a,null,r.a.createElement(R.a.Item,null,r.a.createElement("div",{className:"filter-book"},r.a.createElement("div",null,r.a.createElement("b",null,"Type - "),t.bodytype),r.a.createElement("div",null,r.a.createElement(b.a,{variant:"success",onClick:function(){return e.togglePopUp(t)}},"Book")))),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Seats - "),t.seats),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Color - "),t.colour),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Price - "),"$",t.costperhour,"/hr"),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Fuel Type - "),t.fueltype),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Address - ")," ",e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))})))))))})))),r.a.createElement("div",null,r.a.createElement(q.a,{show:this.state.popUp,onHide:this.handleClose,backdrop:"static",keyboard:!1},r.a.createElement(q.a.Header,{closeButton:!0},r.a.createElement(q.a.Title,null,"Confirm Booking")),r.a.createElement(q.a.Body,null,r.a.createElement(re,{locations:this.state.locations,car:this.state.selectedCar,pickupTime:this.state.pickupTime,returnTime:this.state.returnTime,handleClose:this.handleClose}))))))}}]),a}(n.Component),oe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({errorMessage:""},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t={pickupTime:n.state.pickupTime,returnTime:n.state.returnTime};U.default.searchAvailableCars(t).then((function(e){n.props.updateCars(e.data.availableCars,n.state.pickupTime,n.state.returnTime),n.props.history.push("/filter")})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={today_date:"".concat((new Date).getFullYear(),"-").concat("".concat((new Date).getMonth()+1).padStart(2,0),"-").concat("".concat((new Date).getDate()).padStart(2,0),"T").concat("".concat((new Date).getHours()).padStart(2,0),":").concat("".concat((new Date).getMinutes()).padStart(2,0)),pickupTime:"".concat((new Date).getFullYear(),"-").concat("".concat((new Date).getMonth()+1).padStart(2,0),"-").concat("".concat((new Date).getDate()).padStart(2,0),"T").concat("".concat((new Date).getHours()).padStart(2,0),":").concat("".concat((new Date).getMinutes()).padStart(2,0)),returnTime:"".concat((new Date).getFullYear(),"-").concat("".concat((new Date).getMonth()+1).padStart(2,0),"-").concat("".concat((new Date).getDate()).padStart(2,0),"T").concat("".concat((new Date).getHours()).padStart(2,0),":").concat("".concat((new Date).getMinutes()).padStart(2,0)),errorMessage:"",nextBooking:{},nextBookingExists:!1,car:"",location:"",successHeader:"",activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;ee.getNextBooking().then((function(t){if(Object.keys(t.data).length){var a=new Date;a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),e.setState({nextBooking:t.data,nextBookingExists:!0}),U.default.getCar(t.data.car).then((function(t){e.setState({car:t.data.car})})),j.default.getLocationFromId(t.data.location).then((function(t){j.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))}))}})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"dashboard-grid"},r.a.createElement("div",null,r.a.createElement(C.a,{style:{width:"100%"},className:"alert text-center",show:this.state.errorMessage,variant:"danger"},this.state.errorMessage)),r.a.createElement("div",{className:"dashboard-block"},r.a.createElement(S.a,{onSubmit:this.handleSubmit,id:"availability_form"},r.a.createElement("h3",null,"Request a ride now"),r.a.createElement("br",null),r.a.createElement(S.a.Group,{controlId:"formHorizontalFirstName"},r.a.createElement(S.a.Label,null,"Pickup"),r.a.createElement(S.a.Control,{name:"pickupTime",type:"datetime-local",value:this.state.pickupTime,min:this.state.today_date,onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,{controlId:"formHorizontalLastName"},r.a.createElement(S.a.Label,null,"Return"),r.a.createElement(S.a.Control,{name:"returnTime",type:"datetime-local",value:this.state.returnTime,min:this.state.today_date,onChange:this.handleChange,required:!0})),r.a.createElement(S.a.Group,null,r.a.createElement(b.a,{type:"submit",variant:"info",className:"btn btn-lg btn-block"},"Check Availability"))),this.state.nextBookingExists&&r.a.createElement(D.a,null,r.a.createElement("div",{className:"dashboard-upcoming"},r.a.createElement("h3",null,"Upcoming Trip"),r.a.createElement("a",{href:"/mybookings/".concat(this.state.nextBooking._id)},"View All Details")),r.a.createElement("br",null),r.a.createElement("div",{className:"dashboard-booking"},r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(R.a,{className:"list-group-flush"},r.a.createElement(R.a.Item,null,this.state.location.address)),r.a.createElement(f.a.Body,null,this.state.isLoading&&r.a.createElement("div",{style:{height:"500px"}},r.a.createElement(O.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"500px",width:"90%"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(O.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(O.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))))))))))}}]),a}(n.Component),se=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"})(oe),ce=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={bookings:[],locations:[],destinations:[],cars:[],errorMessage:""},n.handleCancelButton=n.handleCancelButton.bind(Object(y.a)(n)),n.getUsersBookings=n.getUsersBookings.bind(Object(y.a)(n)),n.checkBookingPast=n.checkBookingPast.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getUsersBookings(),j.default.getAllLocations().then((function(t){var a=e.state.locations,n=e.state.destinations;t.data.forEach((function(t){var r={id:t._id,address:t.address,name:t.name},l={id:t._id,address:t.address,name:t.name};a.push(r),n.push(l),e.setState({locations:a}),e.setState({destinations:n})}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),U.default.getAllCars().then((function(t){e.setState({cars:t.data.cars})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"getUsersBookings",value:function(){var e=this,t=p.default.getLoggedInUserDetails();ee.getUserBookings(t.id).then((function(t){e.setState({bookings:t.data.bookings.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"checkBookingPast",value:function(e){var t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),new Date(e)>t}},{key:"handleCancelButton",value:function(e){var t=this;e.status="Cancelled",ee.modifyBooking(e).then((function(){t.getUsersBookings()})).catch((function(e){t.setState({errorMessage:e.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"booking-list-grid"},r.a.createElement("div",null,this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error obtaining bookings!"),r.a.createElement("p",null,this.state.errorMessage))),r.a.createElement("div",null,r.a.createElement("div",{className:"booking-list-block"},this.state.bookings.map((function(t,a){return r.a.createElement(f.a,{bg:"light",key:a},r.a.createElement(f.a.Body,null,r.a.createElement(f.a.Title,null,r.a.createElement("div",{className:"booking-list-title"},r.a.createElement("div",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.name))}))),r.a.createElement("div",null,"Confirmed"===t.status&&r.a.createElement("b",{className:"text-success"},t.status),"Cancelled"===t.status&&r.a.createElement("b",{className:"text-danger"},t.status))))),r.a.createElement(R.a,{className:"list-group-flush"},r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Booking Id - "),t.id),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Pickup - "),ae()(t.pickuptime).format("MMMM Do YYYY, h:mm a")),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Return - "),ae()(t.returntime).format("MMMM Do YYYY, h:mm a")),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Bus - "),e.state.cars.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.car&&r.a.createElement(r.a.Fragment,null,e.make))}))),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Price - "),"$",t.cost,"/hr"),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Location - "),e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.name))}))),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Address - "),e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Destination - "),e.state.destinations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.destination&&r.a.createElement(r.a.Fragment,null,e.address))})))),r.a.createElement(f.a.Body,null,r.a.createElement(f.a.Link,{href:"/mybookings/".concat(t.id)},"View Details"),"Confirmed"===t.status&&e.checkBookingPast(t.pickuptime)&&r.a.createElement(f.a.Link,{href:"#",onClick:function(){return e.handleCancelButton(t)}},"Cancel")))})))))}}]),a}(n.Component),ie=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={location:{},destination:{},booking:{},car:{},errorMessage:"",activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleCancelButton=n.handleCancelButton.bind(Object(y.a)(n)),n.getBookingDetails=n.getBookingDetails.bind(Object(y.a)(n)),n.checkBookingPast=n.checkBookingPast.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"getBookingDetails",value:function(){var e=this;ee.getUserBooking(this.props.match.params.id).then((function(t){e.setState({booking:t.data.booking}),U.default.getCar(e.state.booking.car).then((function(t){e.setState({car:t.data.car})})),j.default.getLocationFromId(e.state.booking.location).then((function(t){j.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))})),j.default.getLocationFromId(e.state.booking.destination).then((function(t){j.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.name,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({destination:n,isLoading:!0})}))}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"componentDidMount",value:function(){this.getBookingDetails()}},{key:"handleCancelButton",value:function(){var e=this,t=this.state.booking;t.status="Cancelled",t.id=t._id,this.setState({booking:t}),ee.modifyBooking(this.state.booking).then((function(){e.getBookingDetails()})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"checkBookingPast",value:function(e){var t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),new Date(e)>t}},{key:"render",value:function(){return r.a.createElement("div",{className:"booking-grid"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(this.state.car.image,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}}),r.a.createElement("div",{className:"booking-details"},r.a.createElement("div",null,r.a.createElement("h2",null,"Booking details"),r.a.createElement(R.a,{ariant:"flush"},r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Status")," - ",this.state.booking.status),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Booking ID")," - ",this.state.booking._id),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Pickup time")," - ",ae()(this.state.booking.pickuptime).format("MMMM Do YYYY, h:mm a")),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Return time")," - ",ae()(this.state.booking.returntime).format("MMMM Do YYYY, h:mm a")),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Amount Paid")," - $",this.state.booking.cost),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Address")," - ",this.state.location.address),r.a.createElement(R.a.Item,null,r.a.createElement("b",null,"Bus")," - ",this.state.car.make," | ",this.state.car.colour," | ",this.state.car.fueltype," | ",this.state.car.bodytype," | ",this.state.car.seats," seater | ",this.state.car.numberplate),r.a.createElement(R.a.Item,null,"Confirmed"===this.state.booking.status&&this.checkBookingPast(this.state.booking.pickuptime)&&r.a.createElement(b.a,{variant:"danger",onClick:this.handleCancelButton},"Cancel Booking")))),r.a.createElement("div",null,r.a.createElement("h2",null,"See it on the map"),r.a.createElement(f.a,null,r.a.createElement(f.a.Body,null,this.state.isLoading&&r.a.createElement("div",{style:{height:"400px"}},r.a.createElement(O.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"90%"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(O.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(O.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))))))))}}]),a}(n.Component),me=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"})(ie),ue=a(11).default,de=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=ue.getLoggedInUserDetails();return r.a.createElement(D.a,null,r.a.createElement("h2",null,"My Profile"),r.a.createElement("strong",null,"First name: "),e.firstname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Last name: "),e.lastname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Email: "),e.email," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Customer ID: "),e.id," ",r.a.createElement("br",null),r.a.createElement(b.a,{href:"/mybookings"},"View My Bookings"))}}]),a}(n.Component),he=a(11).default,ge=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=he.getLoggedInUserDetails();return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"My Profile"),r.a.createElement("strong",null,"First name: "),e.firstname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Last name: "),e.lastname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Email: "),e.email," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Staff ID: "),e.id," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Staff type: "),e.usertype," ",r.a.createElement("br",null))}}]),a}(n.Component),pe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){var t={firstname:n.state.firstname.trim(),lastname:n.state.lastname.trim(),email:n.state.email,password:n.state.password,usertype:n.state.usertype};if(""===n.state.firstname)return n.setState({errorMessage:"First name can't be empty!"});if(""===n.state.lastname)return n.setState({errorMessage:"Last name can't be empty!"});if(!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n.state.email).toLowerCase()))return n.setState({errorMessage:"Please enter a valid email!"});p.default.createNewUser(t).then((function(){n.setState({successMessage:"User has been created!",errorMessage:""})})).catch((function(e){n.setState({errorMessage:e.response.data.message})}))},n.state={firstname:"",lastname:"",email:"",password:"",usertype:"",errorMessage:"",successMessage:""},n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Create Account"),this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Sign up failed!"),r.a.createElement("p",null,this.state.errorMessage)),this.state.successMessage&&r.a.createElement(C.a,{variant:"success"},r.a.createElement(C.a.Heading,null,"Account created!"),r.a.createElement("p",null,this.state.successMessage)),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalFirstName"},r.a.createElement(S.a.Label,{column:!0,sm:2},"First Name"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"firstname",type:"firstname",placeholder:"First Name",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalLastName"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Last Name"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"lastname",type:"lastname",placeholder:"Last Name",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalEmail"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"email",type:"email",placeholder:"Email",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalPassword"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Password"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"password",type:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain: at least one number, one uppercase, lowercase letter, and at least 8 or more characters",placeholder:"Password",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalUserType"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Account Type"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"usertype",as:"select",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select account type"),r.a.createElement("option",null,"customer"),r.a.createElement("option",null,"staff"),r.a.createElement("option",null,"admin")))),r.a.createElement(S.a.Group,{as:T.a},r.a.createElement(B.a,{sm:{span:10,offset:2}},r.a.createElement(b.a,{onClick:this.handleSubmit},"Create Account")))))}}]),a}(n.Component),Ee=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).resetState=function(){n.setState({make:"",seats:"",bodytype:"",numberplate:"",colour:"",costperhour:"",fueltype:"",location:"",b64photo:""})},n.handleFile=function(e){var t=e.target.files;if(null!==t){if(e.target.files[0].size>4e6)return n.setState({errMsg:"Image exceeded upload size limit! Please try again with another image."});var a=new FileReader;a.readAsDataURL(t[0]),a.onload=function(e){n.setState({b64photo:e.target.result,errMsg:""})}}},n.handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.inputValidation=function(){var e=n.state,t=e.make,a=e.seats,r=e.bodytype,l=e.numberplate,o=e.colour,s=e.costperhour,c=e.fueltype,i=e.location,m=e.b64photo;return""===t||""===a||""===r||""===l||""===o||""===s||""===c||""===i||""===m?(n.setState({errMsg:"Please fill in everything"}),!1):(n.setState({errMsg:""}),!0)},n.handleSubmit=function(e){if(e.preventDefault(),n.inputValidation()){n.setState({disableSubmit:!0});var t={make:n.state.make.trim(),seats:n.state.seats,bodytype:n.state.bodytype,numberplate:n.state.numberplate.trim(),colour:n.state.colour,costperhour:n.state.costperhour,fueltype:n.state.fueltype,location:n.state.location,b64photo:n.state.b64photo};U.default.createNewCar(t).then((function(e){n.setState({disableSubmit:!1,successMsg:"Successfully added car",errMsg:""})}),(function(e){n.setState({disableSubmit:!1,successMsg:"",errMsg:e.response.data.message}),console.log(e.response)}))}},n.state={make:"",seats:"",bodytype:"",numberplate:"",colour:"",costperhour:"",fueltype:"",location:"",locationList:[],disableSubmit:!1,successMsg:"",errMsg:"",b64photo:""},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleFile=n.handleFile.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.default.getAllLocations().then((function(t){t.data.map((function(t){return e.setState({locationList:e.state.locationList.concat(t.address)})}))}),(function(e){console.log(e.response)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Create Bus"),this.state.errMsg&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Add bus failed!"),r.a.createElement("p",null,this.state.errMsg)),this.state.successMsg&&r.a.createElement(C.a,{variant:"success"},r.a.createElement(C.a.Heading,null,"Add bus succeed!"),r.a.createElement("p",null,this.state.successMsg)),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalMake"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Make"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"make",type:"make",placeholder:"Bus Make",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalSeats"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Seats"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"seats",type:"seats",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select seat number"),$.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalBodyType"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Body type"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"bodytype",type:"bodytype",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select body type"),K.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalNumberPlate"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Number Plate"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"numberplate",type:"numberplate",placeholder:"Enter plate number",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalColour"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Colour"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"colour",type:"colour",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select colour"),V.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalCostPerHour"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Cost per hour"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"costperhour",type:"number",placeholder:"Select cost per hour",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalFuelType"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Fuel type"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"fueltype",type:"fueltype",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select fuel type"),Z.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalLocation"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Location"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"location",type:"location",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select location"),"l",this.state.locationList.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalLocation"},r.a.createElement(S.a.Label,{column:!0,sm:2}),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.File,{id:"custom-file",label:"Bus Image (4MB max)",name:"b64photo",accept:"image/*",onChange:this.handleFile}))),r.a.createElement(S.a.Group,{as:T.a},r.a.createElement(B.a,{sm:{span:10,offset:2}},r.a.createElement(b.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Create Bus")))))}}]),a}(n.Component),fe=a(53),be=a.n(fe),ve=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initMap=function(){n.setState({gmapsLoaded:!0})},n.handleAutocomplete=function(e){n.setState({address:e})},n.handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){var t=n.state,a=t.name,r=t.address;if(e.preventDefault(),n.setState({successMsg:"",errMsg:"",disableSubmit:!0}),""===a||""===r)n.setState({errMsg:"name and address cannot be empty",disableSubmit:!1});else{var l={name:a.trim(),address:r};j.default.createNewLocation(l).then((function(e){console.log(e.data),n.setState({successMsg:"Location successfully added",disableSubmit:!1,name:"",address:""})}),(function(e){n.setState({errMsg:e.response.data.message,disableSubmit:!1})}))}},n.state={name:"",address:"",errMsg:"",gmapsLoaded:!1,disableSubmit:!1},n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleAutocomplete=n.handleAutocomplete.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.initMap=this.initMap;var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY&libraries=places&callback=initMap",document.querySelector("body").insertAdjacentElement("beforeend",e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Create Location"),this.state.errMsg&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Add location failed!"),r.a.createElement("p",null,this.state.errMsg)),this.state.successMsg&&r.a.createElement(C.a,{variant:"success"},r.a.createElement(C.a.Heading,null,"Add location succeed!"),r.a.createElement("p",null,this.state.successMsg)),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalName"},r.a.createElement(S.a.Label,{column:!0,sm:2,required:!0},"Name"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"name",type:"name",placeholder:"Location Name",onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalName"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Enter Address"),r.a.createElement(B.a,{sm:10},this.state.gmapsLoaded&&r.a.createElement(be.a,{value:this.state.address,onChange:this.handleAutocomplete,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,l=e.loading;return r.a.createElement("div",null,r.a.createElement(S.a.Control,t({placeholder:"Search Places ...",className:"location-search-input",required:!0})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},l&&r.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:t,style:a}),r.a.createElement("span",null,e.description))}))))})))),r.a.createElement(S.a.Group,{as:T.a},r.a.createElement(B.a,{sm:{span:10,offset:2}},r.a.createElement(b.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Create Location")))))}}]),a}(n.Component),ke=a(149),ye=a(11).default,Ce=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={customers:[],errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;ye.getAllCustomers().then((function(t){e.setState({customers:t.data.customers.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement(D.a,null,this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error obtaining customers!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"View All Customers"),r.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Customer ID"),r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.customers.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.firstname),r.a.createElement("td",null,e.lastname),r.a.createElement("td",null,e.email),r.a.createElement("td",null,r.a.createElement(b.a,{href:"/admin/view/customers/".concat(e.id)},"View")))})))))}}]),a}(n.Component),Se=a(150),Me=a(11).default,we=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={customer:{},errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;Me.getUserFromId(this.props.match.params.id).then((function(t){e.setState({customer:t.data.user})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement(D.a,null,this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error fetching customer details!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"Customer Details"),r.a.createElement("strong",null,"Customer ID:")," ",this.state.customer._id," ",r.a.createElement("br",null),r.a.createElement("strong",null,"First name:")," ",this.state.customer.firstname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Last name:")," ",this.state.customer.lastname," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Email:")," ",this.state.customer.email," ",r.a.createElement("br",null),r.a.createElement(Se.a,{style:{marginTop:"3vh"}},r.a.createElement(b.a,{href:"/admin/view/customers/".concat(this.state.customer._id,"/bookings")},"View Customer's Bookings"),r.a.createElement(b.a,{href:"/admin/modify/customers/".concat(this.state.customer._id)},"Modify Customer Details")))}}]),a}(n.Component),Oe=a(11).default,je=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state.customer;if(""===n.state.firstname.trim())return n.setState({modifyErrorMessage:"First name shall not be empty"});if(t.firstname=n.state.firstname.trim(),""===n.state.lastname.trim())return n.setState({modifyErrorMessage:"Last name shall not be empty"});if(t.lastname=n.state.lastname.trim(),""===n.state.email.trim())return n.setState({modifyErrorMessage:"Email shall not be empty"});var a={email:n.state.email.trim()};Oe.checkEmailExists(a).then((function(e){if(e.data.exist&&n.state.email!==n.state.customer.email)return n.setState({modifyErrorMessage:"Email already exists! Please revert or try another one."});t.email=n.state.email.trim(),Oe.updateUser(t).then((function(e){return window.location.href="/admin/view/customers/".concat(n.state.customer._id)})).catch((function(e){return n.setState({modifyErrorMessage:e.response.data.message})}))})).catch((function(){return n.setState({modifyErrorMessage:"Error checking if email exists!"})}))},n.state={customer:{},firstname:"",lastname:"",email:"",fetchErrorMessage:"",modifyErrorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;Oe.getUserFromId(this.props.match.params.id).then((function(t){e.setState({firstname:t.data.user.firstname,lastname:t.data.user.lastname,email:t.data.user.email,id:t.data.user._id,customer:t.data.user})})).catch((function(t){e.setState({fetchErrorMessage:t.response.data.message})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.state.fetchErrorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error fetching customer details!"),r.a.createElement("p",null,this.state.fetchErrorMessage)),this.state.modifyErrorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error modifying customer details!"),r.a.createElement("p",null,this.state.modifyErrorMessage)),r.a.createElement("h2",null,"Modify Customer Details"),r.a.createElement("strong",null,"Customer ID:")," ",this.state.customer._id," ",r.a.createElement("br",null),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalFirstName"},r.a.createElement(S.a.Label,{column:!0,sm:2},"First Name"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"firstname",type:"text",value:this.state.firstname,onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalLastName"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Last Name"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"lastname",type:"text",value:this.state.lastname,onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalEmail"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"email",type:"email",value:this.state.email,onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a},r.a.createElement(B.a,{sm:{span:10,offset:2}},r.a.createElement(b.a,{onClick:this.handleSubmit},"Modify User"),r.a.createElement(b.a,{variant:"danger",href:"/admin/view/customers/".concat(this.state.customer._id)},"Cancel")))))}}]),a}(n.Component),Ie=a(12).default,Le=a(16).default,Ae=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={bookings:[],locations:[],cars:[],errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;ee.getAllBookings().then((function(t){e.setState({bookings:t.data.bookings.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),Ie.getAllLocations().then((function(t){var a=e.state.locations;t.data.forEach((function(t){var n={id:t._id,address:t.address,name:t.name};a.push(n),e.setState({locations:a})}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),Le.getAllCars().then((function(t){e.setState({cars:t.data.cars})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,null,this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error fetching all bookings!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"View All Bookings"),r.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Booking ID"),r.a.createElement("th",null,"User ID"),r.a.createElement("th",null,"Booked Time"),r.a.createElement("th",null,"Pickup Time"),r.a.createElement("th",null,"Return Time"),r.a.createElement("th",null,"Car ID"),r.a.createElement("th",null,"Cost"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.bookings.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement("a",{href:"/admin/view/customers/".concat(t.user)},t.user)),r.a.createElement("td",null,t.bookedtime),r.a.createElement("td",null,t.pickuptime),r.a.createElement("td",null,t.returntime),r.a.createElement("td",null,e.state.cars.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.car&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/cars/".concat(t.car)},e.make)))}))),r.a.createElement("td",null,"$",t.cost),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/location/".concat(t.location)},e.name)))}))),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(b.a,{href:"/admin/view/bookings/".concat(t.id)},"View")))})))))}}]),a}(n.Component),_e=a(12).default,De=a(16).default,Te=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={booking:{},car:{},location:{},errorMessage:"",activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n.handleCancelButton=n.handleCancelButton.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"getBookingDetails",value:function(){var e=this;ee.getBooking(this.props.match.params.id).then((function(t){e.setState({booking:t.data.booking}),De.getCar(e.state.booking.car).then((function(t){e.setState({car:t.data.car})})),_e.getLocationFromId(e.state.booking.location).then((function(t){_e.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})}))}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"componentDidMount",value:function(){this.getBookingDetails()}},{key:"handleCancelButton",value:function(){var e=this,t=this.state.booking;t.status="Cancelled",t.id=t._id,this.setState({booking:t}),ee.modifyBooking(this.state.booking).then((function(){e.getBookingDetails()}))}},{key:"checkBookingPast",value:function(e){var t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),new Date(e)>t}},{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement("h2",null,"Booking details"),this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error obtaining booking!"),r.a.createElement("p",null,this.state.errorMessage)),this.state.isLoading&&r.a.createElement("div",{id:"garage-map",style:{height:"400px"}},r.a.createElement(O.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"400px"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(O.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(O.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location"))))),!this.state.errorMessage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"Booking ID: ")," ",this.state.booking._id," ",r.a.createElement("br",null),r.a.createElement("b",null,"Booking time: ")," ",this.state.booking.bookedtime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Pickup time: ")," ",this.state.booking.pickuptime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Return time: ")," ",this.state.booking.returntime," ",r.a.createElement("br",null),r.a.createElement("b",null,"Cost: ")," $",this.state.booking.cost," ",r.a.createElement("br",null),r.a.createElement("b",null,"Location: ")," ",r.a.createElement("a",{href:"/admin/view/location/".concat(this.state.location.id)},this.state.location.name)," ",r.a.createElement("br",null),r.a.createElement("b",null,"Address: ")," ",this.state.location.address," ",r.a.createElement("br",null),r.a.createElement("b",null,"Status: ")," ",this.state.booking.status," ",r.a.createElement("br",null),"Confirmed"===this.state.booking.status&&this.checkBookingPast(this.state.booking.pickuptime)&&r.a.createElement(b.a,{variant:"danger",onClick:this.handleCancelButton},"Cancel"),r.a.createElement(B.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:this.state.car.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},this.state.car.make),r.a.createElement("p",null,this.state.car.fueltype,", ",this.state.car.bodytype,", ",this.state.car.seats," seaters, ",this.state.car.colour),r.a.createElement("h5",null,"$",this.state.car.costperhour," per hour"),r.a.createElement("h5",null,"Number Plate: ",this.state.car.numberplate),r.a.createElement("a",{href:"/admin/view/cars/".concat(this.state.car._id)},r.a.createElement("b",null,"Bus ID: "),this.state.car._id)))))}}]),a}(n.Component),Be=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"})(Te),Ne=a(12).default,Fe=a(16).default,Pe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={bookings:[],locations:[],cars:[],errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;ee.getUserBookings(this.props.match.params.id).then((function(t){e.setState({bookings:t.data.bookings.reverse()})})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),Ne.getAllLocations().then((function(t){var a=e.state.locations;t.data.forEach((function(t){var n={id:t._id,address:t.address,name:t.name};a.push(n),e.setState({locations:a})}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})})),Fe.getAllCars().then((function(t){e.setState({cars:t.data.cars})})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error fetching customer's bookings!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement("h2",null,"Bookings for Customer ",this.props.match.params.id),r.a.createElement(b.a,{href:"/admin/view/customers/".concat(this.props.match.params.id)},"View Customer Profile"),r.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Booking ID"),r.a.createElement("th",null,"Booked Time"),r.a.createElement("th",null,"Pickup Time"),r.a.createElement("th",null,"Return Time"),r.a.createElement("th",null,"Car"),r.a.createElement("th",null,"Cost"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.bookings.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.bookedtime),r.a.createElement("td",null,t.pickuptime),r.a.createElement("td",null,t.returntime),r.a.createElement("td",null,e.state.cars.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.car&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/cars/".concat(t.car)},e.make)))}))),r.a.createElement("td",null,"$",t.cost),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"/admin/view/location/".concat(t.location)},e.name)))}))),r.a.createElement("td",null,e.state.locations.map((function(e){return r.a.createElement(r.a.Fragment,null,e.id===t.location&&r.a.createElement(r.a.Fragment,null,e.address))}))),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(b.a,{href:"/admin/view/bookings/".concat(t.id)},"View")))})))))}}]),a}(n.Component),ze=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={cars:[],errorMessage:""},n.viewCarDetails=n.viewCarDetails.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"viewCarDetails",value:function(e){this.props.history.push("/admin/view/cars/".concat(e))}},{key:"componentDidMount",value:function(){var e=this;U.default.getAllCars().then((function(t){t.data.cars.forEach((function(t){j.default.getLocationFromId(t.location).then((function(a){t.location=a.data.name,t.locationId=a.data._id,e.state.cars.push(t),e.setState({cars:e.state.cars})}))}))})).catch((function(t){e.setState({errorMessage:t.response.data.message})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,null,r.a.createElement("h2",null,"All cars, click row to view/modify."),this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error Getting all cars!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"make"),r.a.createElement("th",null,"seats"),r.a.createElement("th",null,"body type"),r.a.createElement("th",null,"number plate"),r.a.createElement("th",null,"colour"),r.a.createElement("th",null,"cost per hour"),r.a.createElement("th",null,"fuel type"),r.a.createElement("th",null,"location"),r.a.createElement("th",null,"image"),r.a.createElement("th",null,"current booking"))),r.a.createElement("tbody",null,this.state.cars.map((function(t){return r.a.createElement("tr",{style:{cursor:"pointer"},key:t.id,onClick:function(){return e.viewCarDetails(t.id)}},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.make),r.a.createElement("td",null,t.seats),r.a.createElement("td",null,t.bodytype),r.a.createElement("td",null,t.numberplate),r.a.createElement("td",null,t.colour),r.a.createElement("td",null,t.costperhour),r.a.createElement("td",null,t.fueltype),r.a.createElement("td",null,t.location),r.a.createElement("td",null,r.a.createElement("img",{alt:"car",src:t.image,width:50})),r.a.createElement("td",null,null===t.currentbooking?"No booking":t.currentbooking))})))))}}]),a}(n.Component),He=Object(d.g)(ze),Ue=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFile=function(e){var t=e.target.files;if(null!==t){if(e.target.files[0].size>4e6)return n.setState({errMsg:"Image exceeded upload size limit! Please try again with another image."});var a=new FileReader;a.readAsDataURL(t[0]),a.onload=function(e){n.setState({b64photo:e.target.result,errMsg:""})}}},n.inputValidation=function(){var e=n.state,t=e.make,a=e.seats,r=e.bodytype,l=e.numberplate,o=e.colour,s=e.costperhour,c=e.fueltype,i=e.location,m=e.b64photo;return""===t||""===a||""===r||""===l||""===o||""===s||""===c||""===i||""===m?(n.setState({errMsg:"Please fill in everything"}),!1):(n.setState({errMsg:""}),!0)},n.handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.state={car:"",locationList:[],make:"",seats:"",bodytype:"",numberplate:"",colour:"",costperhour:"",fueltype:"",location:"",b64photo:"",errMsg:"",successMsg:""},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleFile=n.handleFile.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.inputValidation()){var a=this.state.car;this.setState({disableSubmit:!0});var n={_id:a._id,make:this.state.make,seats:this.state.seats,bodytype:this.state.bodytype,numberplate:this.state.numberplate,colour:this.state.colour,costperhour:this.state.costperhour,fueltype:this.state.fueltype,location:this.state.location,image:this.state.b64photo};U.default.updateCar(n).then((function(e){t.setState({successMsg:"Car is successfully updated",disableSubmit:!1,errMsg:""}),t.getCar(),t.scrollTop()})).catch((function(e){t.setState({errMsg:e.response.data.message,disableSubmit:!1,successMsg:""})}))}}},{key:"scrollTop",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"getCar",value:function(){var e=this;U.default.getCar(this.props.match.params.id).then((function(t){var a=t.data.car;j.default.getLocationFromId(a.location).then((function(t){a.location=t.data.address,a.locationId=t.data._id,e.setState({car:a,make:a.make,numberplate:a.numberplate,costperhour:a.costperhour,seats:a.seats,colour:a.colour,bodytype:a.bodytype,location:a.locationId,fueltype:a.fueltype,b64photo:a.image})}))})).catch((function(t){e.setState({errMsg:t.response})}))}},{key:"componentDidMount",value:function(){var e=this;this.getCar(),j.default.getAllLocations().then((function(t){t.data.map((function(t){return e.setState({locationList:e.state.locationList.concat(t)})}))}),(function(t){e.setState({errMsg:t.response})}))}},{key:"render",value:function(){var e=this.state.car;return r.a.createElement(D.a,null,r.a.createElement("h2",null,"Car details:"),r.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"make"),r.a.createElement("th",null,"seats"),r.a.createElement("th",null,"body type"),r.a.createElement("th",null,"number plate"),r.a.createElement("th",null,"colour"),r.a.createElement("th",null,"cost per hour"),r.a.createElement("th",null,"fuel type"),r.a.createElement("th",null,"location"),r.a.createElement("th",null,"image"),r.a.createElement("th",null,"current booking"))),r.a.createElement("tbody",null,r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.make),r.a.createElement("td",null,e.seats),r.a.createElement("td",null,e.bodytype),r.a.createElement("td",null,e.numberplate),r.a.createElement("td",null,e.colour),r.a.createElement("td",null,e.costperhour),r.a.createElement("td",null,e.fueltype),r.a.createElement("td",null,e.location),r.a.createElement("td",null,r.a.createElement("img",{alt:"car",src:e.image,width:50})),r.a.createElement("td",null,null===e.currentbooking?"No booking":e.currentbooking)))),r.a.createElement("h2",null,"Modify details"),this.state.errMsg&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Modify car failed!"),r.a.createElement("p",null,this.state.errMsg)),this.state.successMsg&&r.a.createElement(C.a,{variant:"success"},r.a.createElement(C.a.Heading,null,"Modify car succeed!"),r.a.createElement("p",null,this.state.successMsg)),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalMake"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Make"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"make",type:"make",value:this.state.make,onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalSeats"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Seats"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"seats",type:"seats",onChange:this.handleChange,required:!0},$.map((function(t,a){return t===e.seats?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalBodyType"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Body type"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"bodytype",type:"bodytype",onChange:this.handleChange,required:!0},K.map((function(t,a){return t===e.bodytype?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalNumberPlate"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Number Plate"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"numberplate",type:"numberplate",value:this.state.numberplate,onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalColour"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Colour"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"colour",type:"colour",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select colour"),V.map((function(t,a){return t===e.colour?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalCostPerHour"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Cost per hour"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"costperhour",type:"number",value:this.state.costperhour,onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalFuelType"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Fuel type"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"fueltype",type:"fueltype",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select fuel type"),Z.map((function(t,a){return t===e.fueltype?r.a.createElement("option",{key:a,value:t,selected:!0},t):r.a.createElement("option",{key:a,value:t},t)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalLocation"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Location"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{as:"select",name:"location",type:"location",onChange:this.handleChange,required:!0},r.a.createElement("option",{disabled:!0,selected:!0},"Select location"),"l",this.state.locationList.map((function(t,a){return t.address===e.location?r.a.createElement("option",{key:a,value:t._id,selected:!0},t.address):r.a.createElement("option",{key:a,value:t._id},t.address)}))))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalLocation"},r.a.createElement(S.a.Label,{column:!0,sm:2}),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.File,{id:"custom-file",label:"Car Image (4MB max)",name:"b64photo",accept:"image/*",onChange:this.handleFile}))),r.a.createElement(S.a.Group,{as:T.a},r.a.createElement(B.a,{sm:{span:10,offset:2}},r.a.createElement(b.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Update Car")))))}}]),a}(n.Component),Ge=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={locations:[],errorMessage:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.default.getAllLocations().then((function(t){e.setState({locations:t.data})})).catch((function(t){e.setState({errorMessage:t.response})}))}},{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement("h2",null,"All locations, click to view details"),this.state.errorMessage&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Error Getting all cars!"),r.a.createElement("p",null,this.state.errorMessage)),r.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"name"),r.a.createElement("th",null,"address"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.locations.map((function(e){return r.a.createElement("tr",{style:{cursor:"pointer"},key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.address),r.a.createElement("td",null,r.a.createElement(b.a,{href:"/admin/modify/location/".concat(e._id)},"Modify")),r.a.createElement("td",null,r.a.createElement(b.a,{href:"/admin/view/location/".concat(e._id)},"View")))})))))}}]),a}(n.Component),xe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).mapOnMarkerClick=function(e,t){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.mapOnMapClick=function(){return n.setState({showingInfoWindow:!1,selectedPlace:{},activeMarker:{}})},n.state={location:"",errMessage:"",cars:[],successMessage:"",activeMarker:{},showingInfoWindow:!1,selectedPlace:{},isLoading:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;void 0!==this.props.location.state&&this.setState({successMessage:this.props.location.state.success}),j.default.getLocationFromId(this.props.match.params.id).then((function(t){j.default.getGeocodeFromAddress(t.data.address).then((function(a){var n={id:t.data._id,address:t.data.address,name:t.data.name,lat:a.data.results[0].geometry.location.lat,lng:a.data.results[0].geometry.location.lng,cars:t.data.cars};e.setState({location:n,isLoading:!0})})),t.data.cars.forEach((function(t){U.default.getCar(t).then((function(t){e.state.cars.push(t.data.car),e.setState({cars:e.state.cars})}))}))})).catch((function(t){e.setState({errMessage:t.response})}))}},{key:"render",value:function(){var e=this.state.location;return r.a.createElement(D.a,null,this.state.successMessage&&r.a.createElement(C.a,{variant:"success"},r.a.createElement(C.a.Heading,null,"Add bus succeed!"),r.a.createElement("p",null,this.state.successMessage)),r.a.createElement("h2",null,"Location details:"),r.a.createElement(ke.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"name"),r.a.createElement("th",null,"address"),r.a.createElement("th",null))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.address),r.a.createElement("td",null,r.a.createElement(b.a,{href:"/admin/modify/location/".concat(e.id)},"Modify"))))),r.a.createElement(D.a,null,this.state.isLoading&&r.a.createElement("div",{style:{height:"400px"}},r.a.createElement(O.Map,{google:this.props.google,initialCenter:{lat:this.state.location.lat,lng:this.state.location.lng},style:{height:"400px",width:"50%"},zoom:14,onClick:this.mapOnMapClick},r.a.createElement(O.Marker,{id:this.state.location.id,name:this.state.location.name,address:this.state.location.address,onClick:this.mapOnMarkerClick,position:{lat:this.state.location.lat,lng:this.state.location.lng}}),r.a.createElement(O.InfoWindow,{onClose:this.onInfoWindowClose,marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{id:"info-window"},r.a.createElement("h2",null,this.state.selectedPlace.name),r.a.createElement("p",null,this.state.selectedPlace.address),r.a.createElement("a",{href:"/locations/"+this.state.selectedPlace.id},"Check out this location")))))),r.a.createElement("h2",null,"Buses here:"),r.a.createElement(T.a,null,0!==this.state.cars.length?this.state.cars.map((function(e){return r.a.createElement(We,{car:e})})):r.a.createElement(B.a,null,"Garage empty")))}}]),a}(n.Component);function We(e){var t=e.car;return r.a.createElement(B.a,{sm:4},r.a.createElement("div",{className:"cars-div-white",style:{border:"solid black 2px"}},r.a.createElement("img",{src:t.image,alt:"car",width:"100"}),r.a.createElement("h2",{style:{marginTop:"1vh"}},t.make),r.a.createElement("p",null,t.fueltype,", ",t.bodytype,", ",t.seats," seaters, ",t.colour),r.a.createElement("h5",null,"$",t.costperhour," per hour"),r.a.createElement("h5",null,"Number Plate: ",t.numberplate),r.a.createElement("a",{href:"/admin/view/cars/".concat(t._id)},r.a.createElement("b",null,"Bus ID: "),t._id)))}var Ye=Object(O.GoogleApiWrapper)({apiKey:"AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY"})(xe),Re=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initMap=function(){n.setState({gmapsLoaded:!0})},n.handleAutocomplete=function(e){n.setState({address:e})},n.handleChange=function(e){n.setState(Object(k.a)({},e.target.name,e.target.value))},n.state={location:"",address:"",name:"",errMsg:"",gmapsLoaded:!1,successMsg:"",disableSubmit:!1},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleAutocomplete=n.handleAutocomplete.bind(Object(y.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.initMap=this.initMap;var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIt4zpzH_STYDrjE5_9jg_F1Hc_sOphkY&libraries=places&callback=initMap",document.querySelector("body").insertAdjacentElement("beforeend",t),j.default.getLocationFromId(this.props.match.params.id).then((function(t){e.setState({address:t.data.address,name:t.data.name,location:t.data})})).catch((function(t){e.setState({errMsg:t.response})}))}},{key:"handleSubmit",value:function(){var e=this;if(""!==this.state.name){this.setState({disableSubmit:!0});var t={_id:this.state.location._id,name:this.state.name,address:this.state.address,cars:this.state.location.cars};j.default.updateLocation(t).then((function(a){e.props.history.push("/admin/view/location/".concat(t._id),{success:"Successfully updated location"})})).catch((function(t){e.setState({errMsg:t.response.data.message,disableSubmit:!1,successMsg:""})}))}else this.setState({errMsg:"name can't be empty"})}},{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement("h2",null,"Modify Location Details"),r.a.createElement("strong",null,"Location ID:")," ",this.state.location._id," ",r.a.createElement("br",null),this.state.errMsg&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement(C.a.Heading,null,"Modify location failed!"),r.a.createElement("p",null,this.state.errMsg)),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalFirstName"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Name"),r.a.createElement(B.a,{sm:10},r.a.createElement(S.a.Control,{name:"name",type:"text",value:this.state.name,onChange:this.handleChange,required:!0}))),r.a.createElement(S.a.Group,{as:T.a,controlId:"formHorizontalName"},r.a.createElement(S.a.Label,{column:!0,sm:2},"Enter Address"),r.a.createElement(B.a,{sm:10},this.state.gmapsLoaded&&r.a.createElement(be.a,{value:this.state.address,onChange:this.handleAutocomplete,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,l=e.loading;return r.a.createElement("div",null,r.a.createElement(S.a.Control,t({placeholder:"Search Places ...",className:"location-search-input",required:!0})),r.a.createElement("div",{className:"autocomplete-dropdown-container"},l&&r.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",n(e,{className:t,style:a}),r.a.createElement("span",null,e.description))}))))})))),r.a.createElement(S.a.Group,{as:T.a},r.a.createElement(B.a,{sm:{span:10,offset:2}},r.a.createElement(b.a,{onClick:this.handleSubmit,disabled:this.state.disableSubmit},"Update Location")))))}}]),a}(n.Component),qe=Object(d.g)(Re),Ve=(a(140),a(141),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={availableCars:[],pickupTime:"",returnTime:""},e}return Object(c.a)(a,[{key:"updateCars",value:function(e,t,a){this.setState({availableCars:e,pickupTime:t,returnTime:a})}},{key:"componentDidMount",value:function(){p.default.isUserLoggedIn()&&p.default.setupAxiosInterceptors(p.default.getUserToken())}},{key:"render",value:function(){var e=this,t=this.state,a=t.availableCars,n=t.pickupTime,l=t.returnTime,o=p.default.isUserStaff();p.default.isUserLoggedIn();return r.a.createElement(u.a,null,r.a.createElement(E,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:v}),r.a.createElement(d.b,{path:"/signup",component:M}),r.a.createElement(d.b,{path:"/login",component:w}),r.a.createElement(d.b,{path:"/locations/:id",component:W}),r.a.createElement(d.b,{path:"/locations",component:L}),!o&&r.a.createElement(A,{path:"/filter",component:function(e){return r.a.createElement(le,Object.assign({},e,{availableCars:a,pickupTime:n,returnTime:l}))}}),!o&&r.a.createElement(A,{path:"/dashboard",component:function(t){return r.a.createElement(se,Object.assign({},t,{updateCars:e.updateCars.bind(e)}))}}),!o&&r.a.createElement(A,{path:"/mybookings/:id",component:me}),!o&&r.a.createElement(A,{path:"/mybookings",component:ce}),!o&&r.a.createElement(A,{path:"/myprofile",component:de}),r.a.createElement(z,{path:"/staff",component:ge}),r.a.createElement(z,{path:"/admin/signup",component:pe}),r.a.createElement(z,{path:"/admin/addcars",component:Ee}),r.a.createElement(z,{path:"/admin/addlocation",component:ve}),r.a.createElement(z,{path:"/admin/view/customers/:id/bookings",component:Pe}),r.a.createElement(z,{path:"/admin/view/customers/:id",component:we}),r.a.createElement(z,{path:"/admin/view/customers",component:Ce}),r.a.createElement(z,{path:"/admin/view/bookings/:id",component:Be}),r.a.createElement(z,{path:"/admin/view/bookings",component:Ae}),r.a.createElement(z,{path:"/admin/modify/customers/:id",component:je}),r.a.createElement(z,{path:"/admin/view/cars/:id",component:Ue}),r.a.createElement(z,{path:"/admin/view/cars",component:He}),r.a.createElement(z,{path:"/admin/modify/location/:id",component:qe}),r.a.createElement(z,{path:"/admin/view/location/:id",component:Ye}),r.a.createElement(z,{path:"/admin/view/location",component:Ge})))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(44).config(),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},16:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(6),l=a(14),o=a.n(l);a(44).config();var s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_URL+"/api/cars"||!1,c=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"createNewCar",value:function(e){return o.a.post(s,e)}},{key:"getAllCars",value:function(){return o.a.get(s)}},{key:"getCar",value:function(e){return o.a.get("".concat(s,"/").concat(e))}},{key:"searchAvailableCars",value:function(e){return o.a.post(s+"/availability",e)}},{key:"filterCars",value:function(e){return o.a.post(s+"/filter",e)}},{key:"updateCar",value:function(e){return o.a.patch(s+"/".concat(e._id),e)}}]),e}();t.default=new c},76:function(e,t,a){},85:function(e,t,a){e.exports=a(142)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.311a745a.chunk.js.map